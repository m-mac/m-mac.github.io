{"version":3,"sources":["node_modules/rusty-rogue-wasm/rusty_rogue_wasm_bg.js","node_modules/rusty-rogue-wasm/rusty_rogue_wasm.js","index.js","../../../Users/mikem/AppData/Roaming/npm/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["lTextDecoder","TextDecoder","module","require","cachedTextDecoder","ignoreBOM","fatal","decode","cachegetUint8Memory0","getUint8Memory0","buffer","wasm","memory","Uint8Array","getStringFromWasm0","ptr","len","subarray","heap","Array","fill","undefined","push","heap_next","length","addHeapObject","obj","idx","getObject","dropObject","takeObject","ret","greet","WASM_VECTOR_LEN","lTextEncoder","TextEncoder","cachedTextEncoder","encodeString","encodeInto","arg","view","buf","encode","set","read","written","passStringToWasm0","malloc","realloc","mem","offset","code","charCodeAt","slice","dbg_print","msg","ptr0","__wbindgen_malloc","__wbindgen_realloc","len0","cachegetInt32Memory0","getInt32Memory0","Int32Array","TileType","Object","freeze","Wall","Floor","Map","__wrap","create","prototype","free","__wbg_map_free","width","map_width","height","map_height","get_tiles","map_get_tiles","new","map_new","render","map_render","r0","r1","__wbindgen_free","tick","map_tick","__wbindgen_string_new","arg0","arg1","__wbg_alert_5706036d1ab93680","alert","__wbindgen_object_drop_ref","__wbg_new_59cb74e423758ede","Error","__wbg_stack_558ba5917b466edd","stack","__wbg_error_4bb6c2a97407129a","console","error","__wbg_log_d85e484a8ba03c98","log","__wbindgen_throw","load","imports","Response","WebAssembly","instantiateStreaming","e","headers","get","warn","bytes","arrayBuffer","instantiate","instance","Instance","init","input","import","meta","url","replace","wbg","Request","URL","fetch","exports","__wbindgen_wasm_module","TILE_SIZE","GRID_COLOR","FLOOR_COLOR","WALL_COLOR","MAP_WIDTH","MAP_HEIGHT","map","canvas","document","getElementById","ctx","getContext","renderLoop","drawTiles","requestAnimationFrame","drawGrid","beginPath","strokeStyle","moveTo","lineTo","stroke","getIndex","row","column","tilesPtr","tiles","col","fillStyle","fillRect","OVERLAY_ID","OldModule","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","message","overlay","createErrorOverlay","body","appendChild","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"www.e31bb0bc.js","sourceRoot":"..","sourcesContent":["import * as wasm from './rusty_rogue_wasm_bg.wasm';\n\nconst lTextDecoder = typeof TextDecoder === 'undefined' ? (0, module.require)('util').TextDecoder : TextDecoder;\n\nlet cachedTextDecoder = new lTextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n\ncachedTextDecoder.decode();\n\nlet cachegetUint8Memory0 = null;\nfunction getUint8Memory0() {\n    if (cachegetUint8Memory0 === null || cachegetUint8Memory0.buffer !== wasm.memory.buffer) {\n        cachegetUint8Memory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachegetUint8Memory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nconst heap = new Array(32).fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nlet heap_next = heap.length;\n\nfunction addHeapObject(obj) {\n    if (heap_next === heap.length) heap.push(heap.length + 1);\n    const idx = heap_next;\n    heap_next = heap[idx];\n\n    heap[idx] = obj;\n    return idx;\n}\n\nfunction getObject(idx) { return heap[idx]; }\n\nfunction dropObject(idx) {\n    if (idx < 36) return;\n    heap[idx] = heap_next;\n    heap_next = idx;\n}\n\nfunction takeObject(idx) {\n    const ret = getObject(idx);\n    dropObject(idx);\n    return ret;\n}\n/**\n*/\nexport function greet() {\n    wasm.greet();\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nconst lTextEncoder = typeof TextEncoder === 'undefined' ? (0, module.require)('util').TextEncoder : TextEncoder;\n\nlet cachedTextEncoder = new lTextEncoder('utf-8');\n\nconst encodeString = (typeof cachedTextEncoder.encodeInto === 'function'\n    ? function (arg, view) {\n    return cachedTextEncoder.encodeInto(arg, view);\n}\n    : function (arg, view) {\n    const buf = cachedTextEncoder.encode(arg);\n    view.set(buf);\n    return {\n        read: arg.length,\n        written: buf.length\n    };\n});\n\nfunction passStringToWasm0(arg, malloc, realloc) {\n\n    if (realloc === undefined) {\n        const buf = cachedTextEncoder.encode(arg);\n        const ptr = malloc(buf.length);\n        getUint8Memory0().subarray(ptr, ptr + buf.length).set(buf);\n        WASM_VECTOR_LEN = buf.length;\n        return ptr;\n    }\n\n    let len = arg.length;\n    let ptr = malloc(len);\n\n    const mem = getUint8Memory0();\n\n    let offset = 0;\n\n    for (; offset < len; offset++) {\n        const code = arg.charCodeAt(offset);\n        if (code > 0x7F) break;\n        mem[ptr + offset] = code;\n    }\n\n    if (offset !== len) {\n        if (offset !== 0) {\n            arg = arg.slice(offset);\n        }\n        ptr = realloc(ptr, len, len = offset + arg.length * 3);\n        const view = getUint8Memory0().subarray(ptr + offset, ptr + len);\n        const ret = encodeString(arg, view);\n\n        offset += ret.written;\n    }\n\n    WASM_VECTOR_LEN = offset;\n    return ptr;\n}\n/**\n* @param {string} msg\n*/\nexport function dbg_print(msg) {\n    var ptr0 = passStringToWasm0(msg, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    var len0 = WASM_VECTOR_LEN;\n    wasm.dbg_print(ptr0, len0);\n}\n\nlet cachegetInt32Memory0 = null;\nfunction getInt32Memory0() {\n    if (cachegetInt32Memory0 === null || cachegetInt32Memory0.buffer !== wasm.memory.buffer) {\n        cachegetInt32Memory0 = new Int32Array(wasm.memory.buffer);\n    }\n    return cachegetInt32Memory0;\n}\n/**\n*/\nexport const TileType = Object.freeze({ Wall:0,Floor:1, });\n/**\n*/\nexport class Map {\n\n    static __wrap(ptr) {\n        const obj = Object.create(Map.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    free() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        wasm.__wbg_map_free(ptr);\n    }\n    /**\n    * @returns {number}\n    */\n    width() {\n        var ret = wasm.map_width(this.ptr);\n        return ret >>> 0;\n    }\n    /**\n    * @returns {number}\n    */\n    height() {\n        var ret = wasm.map_height(this.ptr);\n        return ret >>> 0;\n    }\n    /**\n    * @returns {number}\n    */\n    get_tiles() {\n        var ret = wasm.map_get_tiles(this.ptr);\n        return ret;\n    }\n    /**\n    * @param {number} width\n    * @param {number} height\n    * @returns {Map}\n    */\n    static new(width, height) {\n        var ret = wasm.map_new(width, height);\n        return Map.__wrap(ret);\n    }\n    /**\n    * @returns {string}\n    */\n    render() {\n        try {\n            wasm.map_render(8, this.ptr);\n            var r0 = getInt32Memory0()[8 / 4 + 0];\n            var r1 = getInt32Memory0()[8 / 4 + 1];\n            return getStringFromWasm0(r0, r1);\n        } finally {\n            wasm.__wbindgen_free(r0, r1);\n        }\n    }\n    /**\n    */\n    tick() {\n        wasm.map_tick(this.ptr);\n    }\n}\n\nexport const __wbindgen_string_new = function(arg0, arg1) {\n    var ret = getStringFromWasm0(arg0, arg1);\n    return addHeapObject(ret);\n};\n\nexport const __wbg_alert_5706036d1ab93680 = function(arg0, arg1) {\n    alert(getStringFromWasm0(arg0, arg1));\n};\n\nexport const __wbindgen_object_drop_ref = function(arg0) {\n    takeObject(arg0);\n};\n\nexport const __wbg_new_59cb74e423758ede = function() {\n    var ret = new Error();\n    return addHeapObject(ret);\n};\n\nexport const __wbg_stack_558ba5917b466edd = function(arg0, arg1) {\n    var ret = getObject(arg1).stack;\n    var ptr0 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    var len0 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len0;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n};\n\nexport const __wbg_error_4bb6c2a97407129a = function(arg0, arg1) {\n    try {\n        console.error(getStringFromWasm0(arg0, arg1));\n    } finally {\n        wasm.__wbindgen_free(arg0, arg1);\n    }\n};\n\nexport const __wbg_log_d85e484a8ba03c98 = function(arg0) {\n    console.log(getObject(arg0));\n};\n\nexport const __wbindgen_throw = function(arg0, arg1) {\n    throw new Error(getStringFromWasm0(arg0, arg1));\n};\n\n","\nlet wasm;\n\nlet cachedTextDecoder = new TextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n\ncachedTextDecoder.decode();\n\nlet cachegetUint8Memory0 = null;\nfunction getUint8Memory0() {\n    if (cachegetUint8Memory0 === null || cachegetUint8Memory0.buffer !== wasm.memory.buffer) {\n        cachegetUint8Memory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachegetUint8Memory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nconst heap = new Array(32).fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nlet heap_next = heap.length;\n\nfunction addHeapObject(obj) {\n    if (heap_next === heap.length) heap.push(heap.length + 1);\n    const idx = heap_next;\n    heap_next = heap[idx];\n\n    heap[idx] = obj;\n    return idx;\n}\n\nfunction getObject(idx) { return heap[idx]; }\n\nfunction dropObject(idx) {\n    if (idx < 36) return;\n    heap[idx] = heap_next;\n    heap_next = idx;\n}\n\nfunction takeObject(idx) {\n    const ret = getObject(idx);\n    dropObject(idx);\n    return ret;\n}\n/**\n*/\nexport function greet() {\n    wasm.greet();\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nlet cachedTextEncoder = new TextEncoder('utf-8');\n\nconst encodeString = (typeof cachedTextEncoder.encodeInto === 'function'\n    ? function (arg, view) {\n    return cachedTextEncoder.encodeInto(arg, view);\n}\n    : function (arg, view) {\n    const buf = cachedTextEncoder.encode(arg);\n    view.set(buf);\n    return {\n        read: arg.length,\n        written: buf.length\n    };\n});\n\nfunction passStringToWasm0(arg, malloc, realloc) {\n\n    if (realloc === undefined) {\n        const buf = cachedTextEncoder.encode(arg);\n        const ptr = malloc(buf.length);\n        getUint8Memory0().subarray(ptr, ptr + buf.length).set(buf);\n        WASM_VECTOR_LEN = buf.length;\n        return ptr;\n    }\n\n    let len = arg.length;\n    let ptr = malloc(len);\n\n    const mem = getUint8Memory0();\n\n    let offset = 0;\n\n    for (; offset < len; offset++) {\n        const code = arg.charCodeAt(offset);\n        if (code > 0x7F) break;\n        mem[ptr + offset] = code;\n    }\n\n    if (offset !== len) {\n        if (offset !== 0) {\n            arg = arg.slice(offset);\n        }\n        ptr = realloc(ptr, len, len = offset + arg.length * 3);\n        const view = getUint8Memory0().subarray(ptr + offset, ptr + len);\n        const ret = encodeString(arg, view);\n\n        offset += ret.written;\n    }\n\n    WASM_VECTOR_LEN = offset;\n    return ptr;\n}\n/**\n* @param {string} msg\n*/\nexport function dbg_print(msg) {\n    var ptr0 = passStringToWasm0(msg, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    var len0 = WASM_VECTOR_LEN;\n    wasm.dbg_print(ptr0, len0);\n}\n\nlet cachegetInt32Memory0 = null;\nfunction getInt32Memory0() {\n    if (cachegetInt32Memory0 === null || cachegetInt32Memory0.buffer !== wasm.memory.buffer) {\n        cachegetInt32Memory0 = new Int32Array(wasm.memory.buffer);\n    }\n    return cachegetInt32Memory0;\n}\n/**\n*/\nexport const TileType = Object.freeze({ Wall:0,Floor:1, });\n/**\n*/\nexport class Map {\n\n    static __wrap(ptr) {\n        const obj = Object.create(Map.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    free() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        wasm.__wbg_map_free(ptr);\n    }\n    /**\n    * @returns {number}\n    */\n    width() {\n        var ret = wasm.map_width(this.ptr);\n        return ret >>> 0;\n    }\n    /**\n    * @returns {number}\n    */\n    height() {\n        var ret = wasm.map_height(this.ptr);\n        return ret >>> 0;\n    }\n    /**\n    * @returns {number}\n    */\n    get_tiles() {\n        var ret = wasm.map_get_tiles(this.ptr);\n        return ret;\n    }\n    /**\n    * @param {number} width\n    * @param {number} height\n    * @returns {Map}\n    */\n    static new(width, height) {\n        var ret = wasm.map_new(width, height);\n        return Map.__wrap(ret);\n    }\n    /**\n    * @returns {string}\n    */\n    render() {\n        try {\n            wasm.map_render(8, this.ptr);\n            var r0 = getInt32Memory0()[8 / 4 + 0];\n            var r1 = getInt32Memory0()[8 / 4 + 1];\n            return getStringFromWasm0(r0, r1);\n        } finally {\n            wasm.__wbindgen_free(r0, r1);\n        }\n    }\n    /**\n    */\n    tick() {\n        wasm.map_tick(this.ptr);\n    }\n}\n\nasync function load(module, imports) {\n    if (typeof Response === 'function' && module instanceof Response) {\n\n        if (typeof WebAssembly.instantiateStreaming === 'function') {\n            try {\n                return await WebAssembly.instantiateStreaming(module, imports);\n\n            } catch (e) {\n                if (module.headers.get('Content-Type') != 'application/wasm') {\n                    console.warn(\"`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\\n\", e);\n\n                } else {\n                    throw e;\n                }\n            }\n        }\n\n        const bytes = await module.arrayBuffer();\n        return await WebAssembly.instantiate(bytes, imports);\n\n    } else {\n\n        const instance = await WebAssembly.instantiate(module, imports);\n\n        if (instance instanceof WebAssembly.Instance) {\n            return { instance, module };\n\n        } else {\n            return instance;\n        }\n    }\n}\n\nasync function init(input) {\n    if (typeof input === 'undefined') {\n        input = import.meta.url.replace(/\\.js$/, '_bg.wasm');\n    }\n    const imports = {};\n    imports.wbg = {};\n    imports.wbg.__wbindgen_string_new = function(arg0, arg1) {\n        var ret = getStringFromWasm0(arg0, arg1);\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_alert_5706036d1ab93680 = function(arg0, arg1) {\n        alert(getStringFromWasm0(arg0, arg1));\n    };\n    imports.wbg.__wbindgen_object_drop_ref = function(arg0) {\n        takeObject(arg0);\n    };\n    imports.wbg.__wbg_new_59cb74e423758ede = function() {\n        var ret = new Error();\n        return addHeapObject(ret);\n    };\n    imports.wbg.__wbg_stack_558ba5917b466edd = function(arg0, arg1) {\n        var ret = getObject(arg1).stack;\n        var ptr0 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        var len0 = WASM_VECTOR_LEN;\n        getInt32Memory0()[arg0 / 4 + 1] = len0;\n        getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n    };\n    imports.wbg.__wbg_error_4bb6c2a97407129a = function(arg0, arg1) {\n        try {\n            console.error(getStringFromWasm0(arg0, arg1));\n        } finally {\n            wasm.__wbindgen_free(arg0, arg1);\n        }\n    };\n    imports.wbg.__wbg_log_d85e484a8ba03c98 = function(arg0) {\n        console.log(getObject(arg0));\n    };\n    imports.wbg.__wbindgen_throw = function(arg0, arg1) {\n        throw new Error(getStringFromWasm0(arg0, arg1));\n    };\n\n    if (typeof input === 'string' || (typeof Request === 'function' && input instanceof Request) || (typeof URL === 'function' && input instanceof URL)) {\n        input = fetch(input);\n    }\n\n    const { instance, module } = await load(await input, imports);\n\n    wasm = instance.exports;\n    init.__wbindgen_wasm_module = module;\n\n    return wasm;\n}\n\nexport default init;\n\n","// Import the WebAssembly memory at the top of the file.\r\nimport { memory } from \"rusty-rogue-wasm/rusty_rogue_wasm_bg\";\r\n//import * as wasm from \"hello-wasm-pack\";\r\nimport { Map, TileType } from \"rusty-rogue-wasm\";\r\n\r\n// Display deetz\r\nconst TILE_SIZE = 16; // px\r\nconst GRID_COLOR = \"#CCCCCC\";\r\nconst FLOOR_COLOR = \"#FFFFFF\";\r\nconst WALL_COLOR = \"#000000\";\r\n\r\n// Init map\r\nconst MAP_WIDTH = 32;\r\nconst MAP_HEIGHT = 16;\r\nconst map = Map.new(MAP_WIDTH, MAP_HEIGHT);\r\n\r\n// setup canvas\r\nconst canvas = document.getElementById(\"game-canvas\");\r\ncanvas.height = (TILE_SIZE + 1) * MAP_HEIGHT + 1;\r\ncanvas.width = (TILE_SIZE + 1) * MAP_WIDTH + 1;\r\nconst ctx = canvas.getContext('2d');\r\n\r\n\r\n\r\nconst renderLoop = () => {\r\n\r\n    // map.Tick();\r\n\r\n    //drawGrid();\r\n    drawTiles();\r\n\r\n\r\n    requestAnimationFrame(renderLoop);\r\n\r\n}\r\n\r\nconst drawGrid = () => {\r\n    ctx.beginPath();\r\n    ctx.strokeStyle = GRID_COLOR;\r\n\r\n    // just draw around outside for now\r\n\r\n    // top\r\n    ctx.moveTo(0, 0);\r\n    ctx.lineTo(MAP_WIDTH, 0);\r\n\r\n    // bottom\r\n    ctx.moveTo(0, MAP_HEIGHT);\r\n    ctx.lineTo(MAP_WIDTH, MAP_HEIGHT);\r\n\r\n    // left\r\n    ctx.moveTo(0, 0);\r\n    ctx.lineTo(0, MAP_HEIGHT);\r\n\r\n    //right\r\n    ctx.moveTo(MAP_WIDTH, 0);\r\n    ctx.lineTo(MAP_WIDTH, MAP_HEIGHT);\r\n\r\n    ctx.stroke();\r\n};\r\n\r\n\r\nconst getIndex = (row, column) => {\r\n    return row * MAP_WIDTH + column;\r\n};\r\n\r\n\r\nconst drawTiles = () => {\r\n    const tilesPtr = map.get_tiles();\r\n    const tiles = new Uint8Array(memory.buffer, tilesPtr, MAP_WIDTH * MAP_HEIGHT);\r\n\r\n    ctx.beginPath();\r\n\r\n    for (let row = 0; row < MAP_HEIGHT; row++) {\r\n        for (let col = 0; col < MAP_WIDTH; col++) {\r\n            const idx = getIndex(row, col);\r\n\r\n            ctx.fillStyle = tiles[idx] === TileType.Floor\r\n                ? FLOOR_COLOR\r\n                : WALL_COLOR;\r\n\r\n            ctx.fillRect(\r\n                col * (TILE_SIZE + 1) + 1,\r\n                row * (TILE_SIZE + 1) + 1,\r\n                TILE_SIZE,\r\n                TILE_SIZE\r\n            );\r\n        }\r\n    }\r\n\r\n    ctx.stroke();\r\n};\r\n\r\n\r\n\r\nrequestAnimationFrame(renderLoop);\r\n\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] âœ¨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] ðŸš¨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">ðŸš¨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}